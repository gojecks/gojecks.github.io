(function(){"use strict";function e(e){e.$disableDebugMode=!1}function t(e){return{$init:function(t){e.on("scroll",function(){this.scrollY>510?t.css("top","70px"):t.removeAttr("style")}),jEli.dom("li a",t).bind("click",function(){jEli.dom("li",t).removeClass("active"),jEli.dom(this).parents().addClass("active")})}}}function n(e,t,n,s){function i(){this.console=null,this.print=function(e){this.console&&(this.console.value=this.console.value+"\n "+e)},this.clearScreen=function(){var e=this;setTimeout(function(){e.console.value=""},500)}}function o(t){var n=new jEli.$jDB(t.name,t.version).open({serviceHost:"http://192.168.1.5/jEliDB/",logService:function(e){e&&r(e)}});n.onSuccess(function(n){e.activeDb=!0,u=n.result,e.dbName=u.name,e.dbVersion=u.version,e.tables=u.list_tables(),s.setItem("activeSession",JSON.stringify(t)),e.$consume();var i=[];i.push("-env -usage"),i.push("-export -[TBL_NAME] -[type] (csv , html or json) -(d or p) -[fileName] (optional)"),i.push("-import -[table] -[insert]"),i.push("-sync -[tbl_name] (optional)"),i.push("-cls (clearScreen)"),i.push("-help"),i.push("-select -[fields] -[table] -Clause[ -[on] -[join] -[where] -[like] ]"),i.push("-insert -[data] -[tbl_name]"),i.push("-create -[tbl_name] [columns]"),i.push("-delete -[tbl_name] -expression[[where] -[like:]]"),i.push("-update -[tbl_name] [data] -expression[ [where] [like]]"),i.push("-turncate -[tbl_name] -flag[[yes] : [no]]"),i.push("-drop -t -[tbl_name] -flag[ [yes] : [no] ]"),i.push("-drop -d -[db_name] -flag[ [yes] : [no] ]"),i.push("-Alter -table] -a -c -columnName [config]"),i.push("-Alter -[tbl_name] -a -p -columnName"),i.push("-Alter -[tbl_name] -a -f -columnName -[relative table]"),i.push("-Alter -[tbl_name] -d -columnName"),i.push("-Alter -[tbl_name] -a -m -[read : write]"),u.jDBHelpers.overwrite(i)})}function a(e){return e.substring(e.lastIndexOf("\n")+1,e.length)}function r(e){setTimeout(function(){i.print(e)},100)}function l(){m=!1,r("\n")}function c(){this.onSuccess=function(t){switch(t.state){case"insert":case"delete":case"update":case"create":case"truncate":case"drop":case"alter":case"sync":case"import":t.result.message&&(e.tables=u.list_tables(),r(t.result.message),e.$consume());break;case"select":r(t.jDBNumRows()+" record(s) found"),e.searchResult=t.getResult();break;case"help":for(var n in t.result.message)r(t.result.message[n]);break;case"cls":i.clearScreen();break;default:r(t.result.message)}l()},this.onError=function(e){e.message&&r(e.message),l()}}var u=null,m=!1,d="";e.db={},e.activeDb=null,e.searchResult=[],e.newData={},e.queryString="",e.queryBuilder="",e.mode="learn";var i=new i;if(s.getItem("activeSession")){var f=JSON.parse(s.getItem("activeSession"));o(f)}e.$disconnect=function(){s.removeItem("activeSession"),e.activeDb=!1},e.syncTable=function(){u.synchronize().Entity(u.name).configSync({serviceHost:"http://localhost/jEliDB/",logService:function(e){r(e)}}).processEntity()},e.$create=function(){e.db.name&&e.db.version&&o(e.db)},e.searchTable=function(t,n){n&&(e.queryBuilder="SELECT:"+n+" FROM:"+t,e.$consume(function(){e.runQuery()}))},e.queryMessage="",e.commandPrompt=function(t){if(13===t.keyCode){var n=a(t.currentTarget.value);t.preventDefault(),e.runQuery(n),i.console=t.currentTarget,m=!0,d=n}},e.runQuery=function(e,t){e&&!jEli.$isEqual(d,e)&&(t&&r(e),r("Performing Task..."),u.jCMD(e,new c))},e.importFile=function(){console.log("importing file")},e.addUserTable=function(t,n){var s=n[t];s&&(s.course&&(s.course=Number(s.course)),s.id&&(s.id=Number(s.id)),e.$consume(function(){e.runQuery("-INSERT -"+JSON.stringify([s])+" -"+t,1)}))},e.truncateTable=function(t){t&&e.$consume(function(){e.runQuery("-TRUNCATE -"+t+" -no",1)})},e.setMode=function(t){e.mode=t},e.getMode=function(t){return e.mode===t},e.dropTable=function(t){t&&e.$consume(function(){e.runQuery("-DROP -table -"+t+" -no",1)})}}jEli.jModule("eliTest",["jEli.web.route"]).jConfig(["jDebugProvider",e]).jController("baseCtrl",["$scope","$webState","$rootModel","$sessionStorage",n]).jElement("handleScroll",["$window",t])})(),function(){"use strict";function e(e,t){t.fallBack("/"),e.setState("profile",{url:"/tutorials",template:"<div>My new Profile Page</div>"}).setState("default",{url:"/",templateUrl:"main.tmpl.html"})}jEli.jModule("eliTest").jConfig(["$jEliWebStateProvider","$jEliWebProvider",e])}();